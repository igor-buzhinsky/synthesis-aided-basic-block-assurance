INPUT DELAY_INPUT_SIGN:bool DELAY_UP:0..1 DELAY_DOWN:0..1
OUTPUT DELAY_OUTPUT_SIGN:bool

# not satisfied for the original NuSMV block
SPEC_SYNTHESIS G(DELAY_UP = 0 & DELAY_DOWN = 0 -> (DELAY_INPUT_SIGN <-> DELAY_OUTPUT_SIGN))

# S1 UP
SPEC_SYNTHESIS G(!DELAY_INPUT_SIGN & X(DELAY_INPUT_SIGN) -> (X(DELAY_UP != 0) & !DELAY_OUTPUT_SIGN -> X(!DELAY_OUTPUT_SIGN)) & (X(DELAY_UP = 0) || X(DELAY_UP != 0) & DELAY_OUTPUT_SIGN -> X(DELAY_OUTPUT_SIGN)))

# S1 DOWN
SPEC_SYNTHESIS G(DELAY_INPUT_SIGN & X(!DELAY_INPUT_SIGN) -> (X(DELAY_DOWN != 0) & DELAY_OUTPUT_SIGN -> X(DELAY_OUTPUT_SIGN)) & (X(DELAY_DOWN = 0) || X(DELAY_DOWN != 0) & !DELAY_OUTPUT_SIGN -> X(!DELAY_OUTPUT_SIGN)))

#S2 UP
SPEC_SYNTHESIS G(DELAY_UP = 1 & !DELAY_INPUT_SIGN & !DELAY_OUTPUT_SIGN & X(DELAY_UP = 1 & DELAY_INPUT_SIGN & X(DELAY_UP = 1 & DELAY_INPUT_SIGN)) -> X(!DELAY_OUTPUT_SIGN & X(DELAY_OUTPUT_SIGN)))

#S2 DOWN
SPEC_SYNTHESIS G(DELAY_DOWN = 1 & DELAY_INPUT_SIGN & DELAY_OUTPUT_SIGN & X(DELAY_DOWN = 1 & !DELAY_INPUT_SIGN & X(DELAY_DOWN = 1 & !DELAY_INPUT_SIGN)) -> X(DELAY_OUTPUT_SIGN & X(!DELAY_OUTPUT_SIGN)))

# Extra spec: FALSE initial memory (to be specified for each possible delay value > 0!)
SPEC_SYNTHESIS DELAY_UP = 1 -> !DELAY_OUTPUT_SIGN

# Extra spec: initial step version of S1 UP
SPEC_SYNTHESIS DELAY_INPUT_SIGN -> (DELAY_UP != 0 -> !DELAY_OUTPUT_SIGN) & (DELAY_UP = 0 -> DELAY_OUTPUT_SIGN)

# Extra spec: initial step version of S2 UP
SPEC_SYNTHESIS DELAY_UP = 1 & DELAY_INPUT_SIGN & X(DELAY_UP = 1 & DELAY_INPUT_SIGN) -> !DELAY_OUTPUT_SIGN & X(DELAY_OUTPUT_SIGN)

# Extra spec: response for a long FALSE sequence (may require multiple versions for delays > 1)
#SPEC_SYNTHESIS G(!DELAY_INPUT_SIGN -> X(!DELAY_INPUT_SIGN -> !DELAY_OUTPUT_SIGN))
SPEC_SYNTHESIS G(!DELAY_INPUT_SIGN & DELAY_DOWN = 0 -> !DELAY_OUTPUT_SIGN)
SPEC_SYNTHESIS G(!DELAY_INPUT_SIGN & DELAY_DOWN = 1 -> X(!DELAY_INPUT_SIGN & DELAY_DOWN = 1 -> !DELAY_OUTPUT_SIGN))

# Extra spec: response for a long TRUE sequence (may require multiple versions for delays > 1)
#SPEC_SYNTHESIS G(DELAY_INPUT_SIGN -> X(DELAY_INPUT_SIGN -> DELAY_OUTPUT_SIGN))
SPEC_SYNTHESIS G(DELAY_INPUT_SIGN & DELAY_UP = 0 -> DELAY_OUTPUT_SIGN)
SPEC_SYNTHESIS G(DELAY_INPUT_SIGN & DELAY_UP = 1 -> X(DELAY_INPUT_SIGN & DELAY_UP = 1 -> DELAY_OUTPUT_SIGN))

